<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚ãã‚ãï¼å³ã‹å·¦ã‹ã©ã£ã¡ã‹ãªï¼Ÿ</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap');
    
    body {
      font-family: 'Kosugi Maru', sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
      color: #333;
    }
    
    h1 {
      margin-top: 20px;
      color: #ff6b6b;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      font-size: 2.5em;
    }
    
    #points {
      font-size: 1.5em;
      margin: 10px;
      background-color: #ffde59;
      border-radius: 20px;
      padding: 10px 20px;
      display: inline-block;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    /* æ›ã‘ã‚‹ãƒã‚¤ãƒ³ãƒˆé¸æŠã‚¨ãƒªã‚¢ */
    #bet {
      margin: 20px auto;
      width: 300px;
      background-color: #fff;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 8px 15px rgba(0,0,0,0.1);
      border: 4px dashed #4cd3c2;
    }
    
    #betTitle {
      font-size: 1.3em;
      color: #ff6b6b;
    }
    
    #betDisplay {
      font-size: 2em;
      margin-bottom: 10px;
      border: 3px solid #4cd3c2;
      padding: 10px;
      background-color: #e9f7f4;
      border-radius: 15px;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
    }
    
    #betConfirm {
      font-size: 1.3em;
      color: #ff6b6b;
      margin: 10px;
      padding: 10px;
      background-color: #ffde59;
      border-radius: 15px;
      display: none;
    }
    
    #keypad {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    
    #keypad button {
      padding: 15px;
      font-size: 1.2em;
      cursor: pointer;
      border-radius: 10px;
      border: none;
      background-color: #4cd3c2;
      color: white;
      box-shadow: 0 4px 0 #30a596;
      transition: all 0.1s;
      font-family: 'Kosugi Maru', sans-serif;
    }
    
    #keypad button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 0 #30a596;
    }
    
    #keypad button:active {
      transform: translateY(2px);
      box-shadow: 0 2px 0 #30a596;
    }
    
    #clear {
      background-color: #ff9a9e !important;
      box-shadow: 0 4px 0 #ff6b6b !important;
    }
    
    #enter {
      background-color: #ffde59 !important;
      box-shadow: 0 4px 0 #ffc107 !important;
    }
    
    /* ã‚²ãƒ¼ãƒ ã‚¨ãƒªã‚¢ */
    #gameArea {
      margin: 20px auto;
      width: 600px;
      background-color: #fff;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 8px 15px rgba(0,0,0,0.1);
      border: 4px solid #ffde59;
    }
    
    #message {
      font-size: 1.5em;
      color: #ff6b6b;
      margin-bottom: 20px;
    }
    
    .box-container {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
    }
    
    .box {
      width: 200px;
      height: 200px;
      border: 4px solid #4cd3c2;
      border-radius: 20px;
      line-height: 200px;
      font-size: 1.5em;
      background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
      position: relative;
      box-shadow: 0 8px 15px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: all 0.3s;
      cursor: pointer;
    }
    
    .box:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 20px rgba(0,0,0,0.15);
    }
    
    .box.shaking {
      animation: shake 0.5s infinite;
    }
    
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(0); }
      75% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }
    
    .box.flashing {
      animation: flash 0.5s infinite;
    }
    
    @keyframes flash {
      0% { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); }
      50% { background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%); }
      100% { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); }
    }
    
    .box.open {
      background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
    }
    
    .box .content {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      line-height: 200px;
      font-size: 2em;
      color: #333;
    }
    
    .box.open .content {
      display: block;
      animation: pop 0.5s;
    }
    
    @keyframes pop {
      0% { transform: scale(0); opacity: 0; }
      80% { transform: scale(1.2); opacity: 1; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .buttons {
      margin-top: 20px;
    }
    
    .buttons button {
      padding: 15px 30px;
      font-size: 1.2em;
      margin: 0 20px;
      cursor: pointer;
      border-radius: 50px;
      border: none;
      background-color: #4cd3c2;
      color: white;
      box-shadow: 0 6px 0 #30a596;
      transition: all 0.1s;
      font-family: 'Kosugi Maru', sans-serif;
    }
    
    .buttons button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 0 #30a596;
    }
    
    .buttons button:active {
      transform: translateY(2px);
      box-shadow: 0 4px 0 #30a596;
    }
    
    /* æ¼”å‡ºã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
    #countdown {
      font-size: 8em;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #ff6b6b;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
      z-index: 100;
      opacity: 0;
      display: none;
    }
    
    #countdown.active {
      display: block;
      animation: countdownAnim 1s forwards;
    }
    
    @keyframes countdownAnim {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      20% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
      80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
    }
    
    #confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 90;
      pointer-events: none;
      display: none;
    }
    
    .confetti-piece {
      position: absolute;
      width: 10px;
      height: 30px;
      background: #ffd700;
      top: -20px;
      opacity: 0;
    }
    
    @keyframes confettiFall {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    
    /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
    #result {
      margin: 20px auto;
      width: 400px;
      background-color: #fff;
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 8px 15px rgba(0,0,0,0.1);
    }
    
    #resultMessage {
      font-size: 1.5em;
      margin-bottom: 20px;
      padding: 15px;
      border-radius: 15px;
    }
    
    .win {
      background-color: #c4f5e3;
      color: #00a676;
      animation: pulse 1s infinite;
    }
    
    .lose {
      background-color: #ffe3e3;
      color: #ff6b6b;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    #nextRound {
      padding: 15px 30px;
      font-size: 1.2em;
      cursor: pointer;
      border-radius: 50px;
      border: none;
      background-color: #ffde59;
      color: #333;
      box-shadow: 0 6px 0 #ffc107;
      transition: all 0.1s;
      font-family: 'Kosugi Maru', sans-serif;
    }
    
    #nextRound:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 0 #ffc107;
    }
    
    #nextRound:active {
      transform: translateY(2px);
      box-shadow: 0 4px 0 #ffc107;
    }
    
    /* ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ */
    .character {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 150px;
      height: 150px;
      background-image: url('https://img.icons8.com/?size=512&id=Qf0IPtU0XtQB&format=png');
      background-size: contain;
      background-repeat: no-repeat;
      z-index: 10;
    }
  </style>
</head>
<body>
  <h1>ğŸ® ã‚ãã‚ãï¼å³ã‹å·¦ã‹ã©ã£ã¡ã‹ãªï¼ŸğŸ®</h1>
  <div id="points">æ‰€æŒãƒã‚¤ãƒ³ãƒˆ: 10</div>

  <!-- æ›ã‘ã‚‹ãƒã‚¤ãƒ³ãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢ï¼ˆã‚½ãƒ•ãƒˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ä»˜ãï¼‰ -->
  <div id="bet">
    <p id="betTitle">âœ¨ æ›ã‘ã‚‹ãƒã‚¤ãƒ³ãƒˆã‚’é¸ã‚“ã§ã­ï¼ âœ¨</p>
    <div id="betDisplay">0</div>
    <div id="betConfirm"></div>
    <div id="keypad">
      <button class="num-key" data-value="1">1</button>
      <button class="num-key" data-value="2">2</button>
      <button class="num-key" data-value="3">3</button>
      <button class="num-key" data-value="4">4</button>
      <button class="num-key" data-value="5">5</button>
      <button class="num-key" data-value="6">6</button>
      <button class="num-key" data-value="7">7</button>
      <button class="num-key" data-value="8">8</button>
      <button class="num-key" data-value="9">9</button>
      <button id="clear">ã‚¯ãƒªã‚¢</button>
      <button class="num-key" data-value="0">0</button>
      <button id="enter">æ±ºå®š</button>
    </div>
  </div>

  <!-- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ¼”å‡º -->
  <div id="countdown">3</div>

  <!-- ç´™å¹é›ªæ¼”å‡º -->
  <div id="confetti"></div>

  <!-- ã‚²ãƒ¼ãƒ ã‚¨ãƒªã‚¢ -->
  <div id="gameArea" style="display:none;">
    <p id="message">å³ã‹å·¦ã‹ã©ã£ã¡ã‹ãªï¼Ÿå½“ãŸã‚‹ã¨ã„ã„ã­ï¼</p>
    <div class="box-container">
      <div class="box" id="leftBox">
        å·¦ã®ç®±
        <div class="content"></div>
      </div>
      <div class="box" id="rightBox">
        å³ã®ç®±
        <div class="content"></div>
      </div>
    </div>
    <div class="buttons">
      <button id="chooseLeft">å·¦ã‚’é¸ã¶</button>
      <button id="chooseRight">å³ã‚’é¸ã¶</button>
    </div>
  </div>

  <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
  <div id="result" style="display:none;">
    <p id="resultMessage"></p>
    <button id="nextRound">æ¬¡ã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼</button>
  </div>

  <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ -->
  <div class="character"></div>

  <script>
    let currentPoints = 10;
    let currentBet = 0;
    const pointsDisplay = document.getElementById('points');
    const betDisplay = document.getElementById('betDisplay');
    const betConfirm = document.getElementById('betConfirm');
    const betSection = document.getElementById('bet');
    const keypadButtons = document.querySelectorAll('.num-key');
    const clearButton = document.getElementById('clear');
    const enterButton = document.getElementById('enter');
    const gameArea = document.getElementById('gameArea');
    const message = document.getElementById('message');
    const leftBox = document.getElementById('leftBox');
    const rightBox = document.getElementById('rightBox');
    const chooseLeft = document.getElementById('chooseLeft');
    const chooseRight = document.getElementById('chooseRight');
    const resultSection = document.getElementById('result');
    const resultMessage = document.getElementById('resultMessage');
    const nextRoundButton = document.getElementById('nextRound');
    const countdown = document.getElementById('countdown');
    const confetti = document.getElementById('confetti');

    function updatePoints() {
      pointsDisplay.textContent = "æ‰€æŒãƒã‚¤ãƒ³ãƒˆ: " + currentPoints;
    }

    // åŠ¹æœéŸ³é–¢æ•°
    function playSound(type) {
      const audio = new Audio();
      
      switch(type) {
        case 'button':
          audio.src = 'https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-jump-coin-216.mp3';
          break;
        case 'win':
          audio.src = 'https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3';
          break;
        case 'lose':
          audio.src = 'https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-lose-2027.mp3';
          break;
        case 'countdown':
          audio.src = 'https://assets.mixkit.co/sfx/preview/mixkit-classic-short-notification-205.mp3';
          break;
        case 'reveal':
          audio.src = 'https://assets.mixkit.co/sfx/preview/mixkit-magical-coin-win-1936.mp3';
          break;
      }
      
      audio.volume = 0.5;
      audio.play();
    }

    // ç´™å¹é›ªã‚’ä½œæˆ
    function createConfetti() {
      confetti.style.display = 'block';
      confetti.innerHTML = '';
      
      const colors = ['#ff6b6b', '#4cd3c2', '#ffde59', '#a1c4fd', '#fda085'];
      
      for (let i = 0; i < 100; i++) {
        const piece = document.createElement('div');
        piece.classList.add('confetti-piece');
        piece.style.left = Math.random() * 100 + 'vw';
        piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        piece.style.width = Math.random() * 10 + 5 + 'px';
        piece.style.height = Math.random() * 20 + 10 + 'px';
        piece.style.animation = `confettiFall ${Math.random() * 3 + 2}s linear forwards`;
        piece.style.animationDelay = Math.random() * 2 + 's';
        confetti.appendChild(piece);
      }
      
      setTimeout(() => {
        confetti.style.display = 'none';
      }, 5000);
    }

    // ã‚½ãƒ•ãƒˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®å‡¦ç†
    keypadButtons.forEach(button => {
      button.addEventListener('click', () => {
        playSound('button');
        let digit = button.getAttribute('data-value');
        if (betDisplay.textContent === "0") {
          betDisplay.textContent = digit;
        } else if (betDisplay.textContent.length < 3) {
          betDisplay.textContent += digit;
        }
      });
    });

    clearButton.addEventListener('click', () => {
      playSound('button');
      betDisplay.textContent = "0";
    });

    enterButton.addEventListener('click', () => {
      currentBet = parseInt(betDisplay.textContent);
      if (isNaN(currentBet) || currentBet <= 0) {
        alert("æ­£ã—ã„ãƒã‚¤ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        return;
      }
      if (currentBet > currentPoints) {
        alert("æ‰€æŒãƒã‚¤ãƒ³ãƒˆã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚");
        return;
      }
      
      // æ›ã‘ã‚‹ãƒã‚¤ãƒ³ãƒˆã®ç¢ºèªè¡¨ç¤º
      betConfirm.textContent = `${currentBet}ãƒã‚¤ãƒ³ãƒˆã‹ã‘ã¾ã™ï¼`;
      betConfirm.style.display = "block";
      
      playSound('button');
      
      // å°‘ã—é–“ã‚’ç½®ã„ã¦ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹
      setTimeout(() => {
        // æ›ã‘ã‚‹ãƒã‚¤ãƒ³ãƒˆãŒæ±ºå®šã•ã‚ŒãŸã‚‰å…¥åŠ›ã‚¨ãƒªã‚¢ã‚’éš ã—ã€ã‚²ãƒ¼ãƒ ã‚¨ãƒªã‚¢ã‚’è¡¨ç¤º
        betSection.style.display = "none";
        gameArea.style.display = "block";
        resetBoxes();
        message.textContent = `${currentBet}ãƒã‚¤ãƒ³ãƒˆã‚’ã‹ã‘ã¦ã€å³ã‹å·¦ã‹ãˆã‚‰ã‚“ã§ã­ï¼`;
      }, 1000);
    });

    // ç®±ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹é–¢æ•°
    function resetBoxes() {
      leftBox.classList.remove('open', 'shaking', 'flashing');
      rightBox.classList.remove('open', 'shaking', 'flashing');
      leftBox.querySelector('.content').textContent = "";
      rightBox.querySelector('.content').textContent = "";
      chooseLeft.disabled = false;
      chooseRight.disabled = false;
    }

    // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ¼”å‡º
    function showCountdown() {
      let count = 3;
      countdown.textContent = count;
      countdown.classList.add('active');
      
      playSound('countdown');
      
      const countInterval = setInterval(() => {
        count--;
        if (count > 0) {
          countdown.textContent = count;
          countdown.classList.remove('active');
          void countdown.offsetWidth; // ãƒªãƒ•ãƒ­ãƒ¼
          countdown.classList.add('active');
          playSound('countdown');
        } else {
          clearInterval(countInterval);
          countdown.classList.remove('active');
        }
      }, 1000);
      
      return new Promise(resolve => setTimeout(resolve, 3000));
    }

    // ç®±ã‚’é¸ã‚“ã ã¨ãã®ã‚²ãƒ¼ãƒ å‡¦ç†
    async function playRound(choice) {
      chooseLeft.disabled = true;
      chooseRight.disabled = true;
      
      // é¸æŠã—ãŸç®±ã®å¼·èª¿
      if (choice === "left") {
        leftBox.classList.add('shaking');
      } else {
        rightBox.classList.add('shaking');
      }
      
      // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³æ¼”å‡º
      await showCountdown();
      
      // ç®±ã®æºã‚Œã‚’æ­¢ã‚ã¦ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
      leftBox.classList.remove('shaking');
      rightBox.classList.remove('shaking');
      
      if (choice === "left") {
        leftBox.classList.add('flashing');
      } else {
        rightBox.classList.add('flashing');
      }
      
      // 50%ã®ç¢ºç‡ã§ãŠè“å­ãŒå…¥ã‚‹
      let win = Math.random() < 0.5;
      
      setTimeout(() => {
        playSound('reveal');
        
        // ãƒ•ãƒ©ãƒƒã‚·ãƒ¥åœæ­¢
        leftBox.classList.remove('flashing');
        rightBox.classList.remove('flashing');
        
        // é¸ã‚“ã ç®±ã‚’ã€Œé–‹ãã€
        if (choice === "left") {
          leftBox.classList.add('open');
          leftBox.querySelector('.content').textContent = win ? "ğŸ¬å½“é¸ğŸ¬" : "ğŸ˜¢ï¾Šï½½ï¾ï¾šğŸ˜¢";
          leftBox.querySelector('.content').style.color = win ? "#00a676" : "#ff6b6b";
        } else if (choice === "right") {
          rightBox.classList.add('open');
          rightBox.querySelector('.content').textContent = win ? "ğŸ¬å½“é¸ğŸ¬" : "ğŸ˜¢ï¾Šï½½ï¾ï¾šğŸ˜¢";
          rightBox.querySelector('.content').style.color = win ? "#00a676" : "#ff6b6b";
        }
        
        // çµæœè¡¨ç¤ºã®é…å»¶
        setTimeout(() => {
          if (win) {
            // å½“ãŸã‚Šã®å ´åˆã®æ¼”å‡º
            playSound('win');
            createConfetti();
            
            // å½“ãŸã‚Šã®å ´åˆã€æ›ã‘ãŸãƒã‚¤ãƒ³ãƒˆåˆ†ãƒ—ãƒ©ã‚¹
            currentPoints += currentBet;
            resultMessage.textContent = "ğŸ‰ ãŠã‚ã§ã¨ã†ï¼ãŠè“å­ã‚²ãƒƒãƒˆï¼ +" + currentBet + "ãƒã‚¤ãƒ³ãƒˆ ğŸ‰";
            resultMessage.className = "win";
          } else {
            // å¤–ã‚Œã®å ´åˆã®æ¼”å‡º
            playSound('lose');
            
            // å¤–ã‚Œã®å ´åˆã¯ã€æ›ã‘ãŸãƒã‚¤ãƒ³ãƒˆã‚’å¤±ã†
            currentPoints -= currentBet;
            resultMessage.textContent = "ğŸ˜¢ æ®‹å¿µï¼ãŠè“å­ã¯è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸ... -" + currentBet + "ãƒã‚¤ãƒ³ãƒˆ";
            resultMessage.className = "lose";
          }
          
          updatePoints();
          gameArea.style.display = "none";
          resultSection.style.display = "block";
          
          // ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã¾ãŸã¯ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ã®åˆ¤å®š
          if (currentPoints <= 0) {
            resultMessage.textContent = "ğŸ˜­ ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼æ‰€æŒãƒã‚¤ãƒ³ãƒˆãŒã‚¼ãƒ­ã«ãªã‚Šã¾ã—ãŸã€‚";
            resultMessage.className = "lose";
            nextRoundButton.style.display = "none";
          } else if (currentPoints >= 30) {
            resultMessage.textContent = "ğŸ† ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ ğŸ†";
            resultMessage.className = "win";
            createConfetti();
            nextRoundButton.style.display = "none";
          } else {
            nextRoundButton.style.display = "inline-block";
          }
        }, 1500);
      }, 1000);
    }

    chooseLeft.addEventListener('click', () => {
      playSound('button');
      playRound("left");
    });

    chooseRight.addEventListener('click', () => {
      playSound('button');
      playRound("right");
    });

    nextRoundButton.addEventListener('click', () => {
      playSound('button');
      // æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã®æº–å‚™ï¼šå…¥åŠ›ã‚¨ãƒªã‚¢ã«æˆ»ã™
      betDisplay.textContent = "0";
      betConfirm.style.display = "none";
      betSection.style.display = "block";
      resultSection.style.display = "none";
    });
  </script>
</body>
</html>
